<!--pages/activity/punchActivity/punchActivity.wxml-->
<!-- 地图 -->
<!-- <topTips id="toptips">
</topTips> -->

<map wx:if="{{position.radius}}" id="map" longitude="{{markers[0].longitude}}" latitude="{{markers[0].latitude}}" scale="17"
    markers="{{markers}}" circles="{{circles}}" style="width: 100%; height: 300px;" show-location="true"></map>


<view class="weui-panel weui-panel_access">
    <view class="weui-panel__bd">
        <view class="weui-media-box weui-media-box_text">
            <view class="weui-media-box__title weui-media-box__title_in-text">
                <text selectable>
                    {{activity.title}}
                </text>
            </view>
            <view class="weui-media-box__desc" style="display:inline;">
                <text selectable>
                    {{activity.description}}
                </text>
            </view>
            <view class="weui-media-box__info">
                <view class="weui-media-box__info__meta">开始时间：{{startTimeStr}}</view>
                <view wx:if="{{position.radius}}" class="weui-media-box__info__meta">活动打卡范围：{{position.radius}} 米</view>
            </view>
        </view>
    </view>
</view>

<view class="weui-cells">
    <!-- 报名列表 -->
    <view class="weui-cell weui-cell_access" hover-class="weui-cell_active" data-type="signUpList" bindtap="naviToMemberList">
        <view class="weui-cell__bd">活动报名列表</view>
        <view class="weui-cell__ft weui-cell__ft_in-access" style="padding-right:50rpx;">
            <block wx:for="{{activity.signUpList}}" wx:for-item="item" wx:for-index="itemIndex" wx:key="itemIndex">
                <view class="weui-grid" style="padding:0;border:0; width:22px;">
                    <image class="weui-grid__icon" style="border:3px solid white;border-radius:28px;" src="{{item.avatar_url}}" />
                </view>
            </block>
        </view>
    </view>
    <!-- 打卡列表 -->
    <view class="weui-cell weui-cell_access" hover-class="weui-cell_active" data-type="punchList" bindtap="naviToMemberList">
        <view class="weui-cell__bd">活动已打卡列表</view>
        <view class="weui-cell__ft weui-cell__ft_in-access" style="padding-right:50rpx;">
            <block wx:for="{{activity.punchList}}" wx:for-item="item" wx:for-index="itemIndex" wx:key="itemIndex">
                <view class="weui-grid" style="padding:0;border:0; width:22px;">
                    <image class="weui-grid__icon" style="border:3px solid white;border-radius:28px;" src="{{item.avatar_url}}" />
                </view>
            </block>
        </view>
    </view>
    <!-- 设置入口 -->
    <view wx:if="{{isOwner}}" class="weui-cell weui-cell_access" hover-class="weui-cell_active" bindtap="naviToSetting">
        <view class="weui-cell__bd">设置</view>
        <view class="weui-cell__ft weui-cell__ft_in-access"></view>
    </view>
</view>

<view class="page__bd_spacing" style="margin-top: 50rpx;margin-bottom:50rpx;padding-bottom:50rpx;">
    <button wx:if="{{!activity.isSignUp}}" class="weui-btn {{commitLoading ? 'zan-btn--loading' : ''}}" disabled="{{commitLoading}}" type="warn" bindtap="signUpActivity">报名 {{wxTimer}}</button>
    <button wx:if="{{activity.isSignUp && !activity.isPunch}}" class="weui-btn {{commitLoading ? 'zan-btn--loading' : ''}}" disabled="{{!isAlreadyStart || commitLoading}}" type="warn" bindtap="punchActivity">打卡 {{wxTimer}}</button>
    <button wx:if="{{activity.isPunch}}" class="weui-btn " disabled="true" type="warn" bindtap="punchActivity">已打卡</button>
</view>